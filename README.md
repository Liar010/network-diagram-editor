# ネットワークダイアグラムエディタ

CiscoのNetwork Sketcherに触発された、モダンなWebベースのネットワーク図作成ツールです。直感的なドラッグ＆ドロップインターフェースで、ネットワーク構成図の作成と管理を簡単に行えます。

## 主な機能

### 🎨 インタラクティブなダイアグラムエディタ
- サイドバーからネットワークコンポーネントをドラッグ＆ドロップ
- ズーム、パン、グリッドスナップ対応のビジュアルキャンバス
- デバイス間のリアルタイム接続描画
- マルチレイヤー表示対応（L1/物理層、L2/データリンク層、L3/ネットワーク層）
- Undo/Redo機能による操作の取り消し・やり直し

### 📦 包括的なデバイスライブラリ
- **ルーター** - ネットワークルーティングデバイス
- **スイッチ** - ネットワークスイッチングデバイス
- **ファイアウォール** - セキュリティアプライアンス
- **サーバー** - コンピューティングリソース
- **ロードバランサー** - トラフィック分散
- **クラウドサービス** - クラウドインフラ
- **ワークステーション** - エンドユーザーデバイス
- **アクセスポイント** - ワイヤレスネットワーク

### ⚙️ 構成管理
- IPアドレス設定を含むデバイスプロパティエディタ
- VLAN設定サポート
- インターフェース管理（ポート、帯域幅）
- カスタムデバイス名設定
- 接続プロパティ（線種、色、アニメーション）のカスタマイズ

### 📤 エクスポート機能
- **PNG エクスポート** - 高品質ラスター画像
- **SVG エクスポート** - スケーラブルベクターグラフィックス
- **JSON エクスポート** - データ永続化と共有
- **CSV エクスポート** - 表形式でのデータエクスポート（プレビュー機能付き）
- プロジェクトの保存/読み込み機能

### 📋 ネットワークテンプレート
事前構築されたネットワークアーキテクチャ：
- **シンプルLAN** - 基本的なローカルエリアネットワーク設定
- **DMZネットワーク** - 非武装地帯を持つ企業ネットワーク
- **クラウドハイブリッド** - ハイブリッドクラウドアーキテクチャ

### 🔧 その他の機能
- **自動レイアウト** - ダイアグラムの自動配置
- **グリッドスナップ** - デバイスの整列を支援
- **キーボードショートカット** - 効率的な操作

## セットアップ

### 前提条件
- Node.js 18+ 
- npm または yarn パッケージマネージャー

### インストール

1. 依存関係をインストール：
```bash
npm install
```

2. （オプション）環境変数を設定：
```bash
# デフォルトのポート3001を変更する場合
cp .env.example .env
# .envファイルを編集してPORTを変更
```

3. 開発サーバーを起動：
```bash
npm start
# または開発スクリプトを使用
./scripts/dev.sh start
```

4. ブラウザで `http://localhost:3001` を開く（デフォルト）

### プロダクションビルド

```bash
npm run build
```

### 開発用スクリプト

開発サーバーの管理には `scripts/dev.sh` を使用できます：
```bash
./scripts/dev.sh start    # サーバー起動
./scripts/dev.sh stop     # サーバー停止
./scripts/dev.sh restart  # サーバー再起動
./scripts/dev.sh status   # ステータス確認
```

## 使い方

### ネットワークダイアグラムの作成

1. **テンプレートから開始**: ツールバーのテンプレートボタンをクリックして、事前構築されたネットワークアーキテクチャから選択
2. **デバイスを追加**: サイドバーからネットワークデバイスをキャンバスにドラッグ
3. **デバイスを接続**: デバイスの接続ポイント間をクリック＆ドラッグしてリンクを作成
4. **プロパティを設定**: デバイスを選択して右パネルでプロパティを編集
5. **作業をエクスポート**: エクスポートメニューを使用して、さまざまな形式でダイアグラムを保存

### キーボードショートカット

- **Delete**: 選択したデバイスまたは接続を削除
- **Ctrl+Z**: 元に戻す（Undo）
- **Ctrl+Y**: やり直し（Redo）
- **Ctrl+G**: グリッドスナップの切り替え

### レイヤー管理

異なるネットワークレイヤー間を切り替え：
- **L1（物理層）**: 物理的なネットワークインフラストラクチャ表示（ポート、帯域幅）
- **L2（データリンク層）**: VLANとスイッチングトポロジー表示
- **L3（ネットワーク層）**: IPルーティングとアドレッシング表示

## 技術スタック

### フロントエンド
- **React 18** + TypeScript - タイプセーフな開発
- **Material-UI (MUI)** - モダンなUIコンポーネント
- **React Flow** - ダイアグラムレンダリングとインタラクション
- **Zustand** - 軽量な状態管理
- **React DnD** - ドラッグ＆ドロップ機能

### 主要ライブラリ
- **html2canvas** - PNG画像エクスポート
- **@xyflow/react** - ダイアグラムエンジン
- **react-dnd** - ドラッグ＆ドロップ
- **@mui/material** - UIコンポーネント
- **@mui/icons-material** - アイコンセット

## プロジェクト構造

```
src/
├── components/          # Reactコンポーネント
│   ├── Canvas/         # ダイアグラムキャンバスとノード
│   ├── Toolbar/        # アクション付きトップツールバー
│   ├── Sidebar/        # デバイスライブラリサイドバー
│   ├── Properties/     # プロパティエディタパネル
│   ├── Templates/      # ネットワークテンプレートダイアログ
│   ├── AutoLayout/     # 自動レイアウトダイアログ
│   └── ExportPreview/  # CSVエクスポートプレビュー
├── store/              # Zustand状態管理
├── types/              # TypeScript型定義
├── utils/              # ユーティリティ関数
│   ├── exportUtils.ts  # エクスポート機能
│   ├── layerUtils.ts   # レイヤー表示ロジック
│   └── gridUtils.ts    # グリッドスナップ計算
├── hooks/              # カスタムReactフック
└── data/               # 静的データとテンプレート
```

## 開発ロードマップ

### 実装済み機能
- [x] 基本的なダイアグラム作成機能
- [x] デバイスのドラッグ＆ドロップ
- [x] 接続の作成と編集
- [x] L1/L2/L3レイヤー表示切り替え
- [x] グリッドスナップ機能
- [x] Undo/Redo機能
- [x] CSVエクスポート（プレビュー付き）
- [x] 自動レイアウト機能

### 今後の実装予定
- [ ] デバイスのグルーピング機能（実装途中）
- [ ] コラボレーション編集機能
- [ ] カスタムデバイスアイコンサポート
- [ ] ネットワーク検証とベストプラクティスチェック
- [ ] ダークモードサポート

## インスピレーション

このプロジェクトはCiscoのNetwork Sketcherに触発され、モダンなWeb技術とユーザーエクスペリエンスをネットワーク図作成にもたらします。

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。